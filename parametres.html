<!DOCTYPE html>
<html lang="ht">
<head>
<meta charset="UTF-8">
<title>Liste des Admins | Dashboard</title>
<style>
  body { margin:0; font-family:Poppins,sans-serif; background:#0f0f0f; color:#fff; }
  header { background:#1e1e1e; height:60px; display:flex; align-items:center; padding:0 20px; box-shadow:0 2px 10px rgba(255,255,255,0.1);}
  header h1 { font-size:22px; color:#ffcc00; margin:0; }
  main { padding:20px; max-width:900px; margin:auto; }
  table { width:100%; border-collapse:collapse; background:#1a1a1a; border-radius:10px; overflow:hidden; margin-bottom:20px;}
  th, td { padding:12px; border-bottom:1px solid #333; text-align:left;}
  th { background:#252525; color:#ffcc00; }
  tr:hover { background:#222; }
  button { padding:6px 12px; border:none; border-radius:4px; cursor:pointer; font-weight:bold;}
  .edit-btn { background:#00b894; color:#fff; margin-right:5px; }
  .delete-btn { background:crimson; color:#fff; }
  .add-btn { background:#ffcc00; color:#000; margin-bottom:10px; }
</style>
</head>
<body>
<header>
  <h1>Liste des Admins</h1>
</header>
<main>
  <button class="add-btn" onclick="window.location.href='add_admin.html'">Ajouter Admin</button>
  <table>
    <thead>
      <tr>
        <th>Nom complet</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Adresse</th>
        <th>Rôle</th>
        <th>Code d'accès</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="adminTable"></tbody>
  </table>
</main>
<script>
  function loadAdmins() {
    const admins = JSON.parse(localStorage.getItem("admins")) || [];
    const table = document.getElementById("adminTable");
    table.innerHTML = "";
    admins.forEach((adm, index) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${adm.fullName}</td>
        <td>${adm.phone}</td>
        <td>${adm.email}</td>
        <td>${adm.address}</td>
        <td>${adm.role}</td>
        <td>${adm.accessCode}</td>
        <td>
          <button class="edit-btn" onclick="editAdmin(${index})">Modifier</button>
          <button class="delete-btn" onclick="deleteAdmin(${index})">Supprimer</button>
        </td>
      `;
      table.appendChild(row);
    });
  }

  function editAdmin(index) {
    localStorage.setItem("editAdminIndex", index);
    window.location.href = "add_admin.html";
  }

  function deleteAdmin(index) {
    if(!confirm("Voulez-vous vraiment supprimer cet admin ?")) return;
    const admins = JSON.parse(localStorage.getItem("admins")) || [];
    admins.splice(index, 1);
    localStorage.setItem("admins", JSON.stringify(admins));
    loadAdmins();
  }

  loadAdmins();
</script>
</body>
</html>