<!DOCTYPE html>
<html lang="ht">
<head>
<meta charset="UTF-8">
<title>Rebel Mode | Lis K√≤mand</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body{font-family:Poppins,sans-serif;background:#0f0f0f;color:#fff;margin:0}
header{background:#1e1e1e;padding:20px 40px;display:flex;justify-content:space-between;align-items:center}
h1{color:#ffcc00}
main{padding:40px;max-width:1100px;margin:auto}
.top-bar{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}
button{padding:10px 18px;border:none;border-radius:6px;background:#ffcc00;font-weight:bold;cursor:pointer}
button:hover{background:#ffdd33}
table{width:100%;border-collapse:collapse;background:#1a1a1a}
th,td{padding:12px;border-bottom:1px solid #333;text-align:left}
th{background:#252525;color:#ffcc00}
.action{background:crimson;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-weight:bold}
</style>
</head>
<body>
<header>
  <h1>üõí Lis K√≤mand | Rebel Mode</h1>
</header>
<main>
<div class="top-bar">
  <button onclick="location.href='orders_add.html'">‚ûï Nouvo K√≤mand</button>
  <button onclick="exportPDF()">üìÑ Exporter PDF</button>
  <button onclick="location.href='dashboard.html'">‚¨ÖÔ∏è Dashboard</button>
</div>

<table>
<thead>
<tr>
<th>Non Kliyan</th>
<th>Pwodwi</th>
<th>Kantite</th>
<th>Total Gdes</th>
<th>Aksyon</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</main>

<script>
const STORAGE_KEY="orders_stock";
const list=document.getElementById("list");

function getOrders(){return JSON.parse(localStorage.getItem(STORAGE_KEY))||[];}
function saveOrders(data){localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}

function loadOrders(){
  const orders=getOrders();
  list.innerHTML="";
  orders.forEach((o,i)=>{
    list.innerHTML+=`
    <tr>
      <td>${o.client}</td>
      <td>${o.produit}</td>
      <td>${o.quantite}</td>
      <td>${o.total} Gdes</td>
      <td><button class="action" onclick="deleteOrder(${i})">Efase</button></td>
    </tr>`;
  });
}

function deleteOrder(i){
  if(!confirm("Efase k√≤mand sa ?")) return;
  const orders=getOrders();
  orders.splice(i,1);
  saveOrders(orders);
  loadOrders();
}

function exportPDF(){
  const orders=getOrders();
  if(orders.length===0){alert("Pa gen k√≤mand");return;}
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  doc.setFontSize(18);
  doc.text("Rebel Mode - Lis K√≤mand",14,20);
  doc.setFontSize(11);
  doc.text("Date : "+new Date().toLocaleDateString(),14,28);
  let y=40;
  doc.text("No",14,y);
  doc.text("Kliyan",25,y);
  doc.text("Pwodwi",80,y);
  doc.text("Kantite",140,y);
  doc.text("Total",160,y);
  y+=6;
  doc.line(14,y,195,y);
  orders.forEach((o,i)=>{
    y+=8;
    if(y>280){doc.addPage();y=20;}
    doc.text(String(i+1),14,y);
    doc.text(o.client,25,y);
    doc.text(o.produit,80,y);
    doc.text(String(o.quantite),140,y);
    doc.text(String(o.total),160,y);
  });
  doc.save("orders_rebel_mode.pdf");
}

loadOrders();
</script>
</body>
</html>